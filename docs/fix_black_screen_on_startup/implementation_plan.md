# 起動時の黒画面問題の修正計画

アプリ起動時に画面が真っ黒になる問題に対し、描画ループの停止や初期化エラーを特定・回避するための修正を行います。

## ユーザーレビューが必要な項目
- 特になし。

## 提案される変更

### [Creative Coding Component]

#### [MODIFY] [sketch.ts](file:///Users/apple/Desktop/Dev_App/geoflux-_p5_visualizer/sketch.ts)
- `draw` ループ内の `try-catch` でエラーを握り潰さず、コンソールに出力するように変更します。これにより、原因の特定を容易にします。
- `p.setup` 内で `pg` や `pgShader` の初期化が失敗した場合でも、本体の描画が停止しないようにガードを追加します。
- `WEBGL` コンテキストの取得失敗への対策として、シェーダーモード以外では `pgShader` を使用しないようにチェックを強化します。
- キャンバスのサイズが 0 の状態で初期化されるのを防ぐため、サイズチェックを厳格化します。

#### [MODIFY] [App.tsx](file:///Users/apple/Desktop/Dev_App/geoflux-_p5_visualizer/App.tsx)
- `useEffect` での p5 インスタンス生成後の `customResize` 呼び出しに僅かな遅延を入れるか、サイズが確定していることを再確認するロジックを検討します（現在は即時呼び出し）。

## 検証計画

### 自動テスト
- なし。

### 手動検証
- ブラウザでアプリを起動し、初期描画が正常に行われることを確認。
- コンソールにエラーが出ていないか確認。
- 通常モードとシェーダーモードを切り替えて、どちらも表示されることを確認。
